# ルーレットアプリ 要件定義書

## 1. 概要
- スマートフォン画面に最適化された対話的なルーレットアプリを開発する。
- ブラウザ上で動作し、GitHub Pages にホスティングする。

## 2. 目的
- 少人数から中規模までのグループで即座に使える「意思決定支援ツール」を提供する。
- シンプルな操作でランダムな結果を得られる体験を重視する。

## 3. スコープ
- 本要件定義は MVP（最小実用プロダクト）における機能と非機能要件を対象とする。
- バックエンドは想定せず、フロントエンド単体で完結する実装を範囲とする。

## 4. 想定プラットフォーム
- 対応 OS: iOS / Android の最新 2 バージョン程度を想定。
- 対応ブラウザ: Safari, Chrome, Edge のモバイル版。
- 画面サイズ: 5～7 インチを想定。レスポンシブ対応はスマートフォン幅（～768px）に限定。

## 5. 利用者想定
- 飲み会やイベントの幹事、チーム内で手軽に抽選を行いたいユーザー。
- ユーザーは特別なチュートリアルなしに直感的に操作できることを想定。

## 6. 用語定義
- **ルーレット枠**: ルーレット円の分割された各セクション。番号が付与される。
- **スワイプ操作**: 画面上で指を滑らせてルーレットを回転させる操作。

## 7. 機能要件
### 7.1 ルーレットの表示
- ルーレットは円形表示とし、画面中央付近に配置する。
- 枠数に応じてルーレットを等分割し、各枠に番号を付与する（1～枠数）。
- 枠番号は時計回りで1→2→3...の順に配置する。
- 各枠の背景色は番号ごとに異なる色を自動割り当てする（枠数に応じて最大20色を用意）。
- 画面上部に固定の矢印またはポインターを配置し、停止時にポインター位置に来た枠を当選枠として判定する。

### 7.2 枠数設定
- UI 上部に枠数選択用のプルダウンを設置する。
- プルダウン選択肢: 2～20 の整数。
- プルダウン変更時にルーレットの枠数・表示・色を動的に再描画し、結果表示もクリアする。
- ルーレットが回転中はプルダウン操作を無効化または入力受付を停止し、停止後に操作可能へ戻す。

### 7.3 スワイプによる回転
- スワイプ操作でルーレットが回転し、慣性を再現したアニメーションで減速停止する。
- 回転アニメーション時間はスワイプの強さに応じて最短5秒、最長20秒の範囲で変化する。
- 当選枠は疑似乱数により事前に決定し、アニメーションは自然な物理演出として表現する（見た目と結果の不自然さを排除）。
- 回転中は追加スワイプや他 UI の操作（ボタン、プルダウンなど）を受け付けず、停止までユーザー操作を明示的に禁止する。
- 回転後、画面上部のポインター位置に停止した枠番号をハイライトし、結果をルーレット直下の結果表示領域にテキストで表示する。
- 結果表示は停止後即時に更新され、次の回転開始までは直前の結果を保持する。

### 7.4 フィードバック
- スワイプ開始・停止時のアニメーションがスムーズであること。
- 必要に応じて音・振動などのフィードバックは MVP では非対応とする（将来拡張可）。

### 7.5 代替操作（フォールバック）
- タッチイベントが取得できない環境では、ボタンUIを表示してルーレット回転を開始できるようにする。
- ボタン押下時の回転時間はランダムに決定する（最短5秒、最長20秒）。

### 7.6 初期表示
- アプリ起動時のデフォルト枠数は4枠とする。
- 初期状態では結果表示領域は空または初回回転を促すメッセージを表示する。

## 8. 非機能要件
- **パフォーマンス**: モバイルブラウザで 60fps を目標に滑らかなアニメーションを実現する。
- **レスポンシブ**: 縦向き表示を前提とし、横向き時は画面回転をブロックまたは縦向き強制を促す表示を行う。
- **アクセシビリティ**: 結果番号表示は視認しやすいコントラストを確保。音声読み上げで番号が取得できることが望ましい。
- **配布**: GitHub Pages に配置し、追加のサーバーサイド構成は不要。

## 9. 制約・前提
- ローカルストレージなどの永続データ保存は MVP の対象外。
- 多言語対応は日本語のみを対象（将来拡張可）。
- 端末の性能差による表現品質の差異は許容範囲とする。
- 使用技術はクライアントサイドの Web 標準技術（HTML/CSS/JavaScript）を想定。
- GitHub リポジトリ: `git@github.com:wikeda/roulette.git`

## 10. テスト観点
- 枠数ごと（2, 3, 4, …, 20）の表示崩れがないか。
- スワイプ強弱による回転・停止挙動が自然か。
- 回転中に操作が受け付けられないこと、および停止後に操作が戻ること。
- 結果番号が UI と内部ロジックで一致しているか。
- GitHub Pages でのホスティング時に依存ファイルが漏れていないか。

## 11. 未決・検討事項
- 回転中に再度スワイプした際の UI 表現詳細（現在は完全無効化として仕様化済み）。

## 12. 今後のステップ
- 上記未決事項について優先度付けと決定のための検討。
- プロトタイプ実装と操作性検証。
- GitHub Pages での動作確認と公開手順策定。
